var e=Object.assign;import{r as t,c as s,a as r,p as a,b as n,o as i,w as o,d as l,e as u,f as c,g as d,v as h,t as p,h as y,F as g,i as m,j as f,u as b,k as v,l as _,m as k,n as w,V as P,q as S,s as x,x as C,y as U}from"./vendor.8f3d7207.js";function R(e,t){return isNaN(parseFloat(e))?e:e=e.toLocaleString(void 0,{minimumFractionDigits:t,maximumFractionDigits:t})}!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(s){const r=new URL(e,location),a=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((s,n)=>{const i=new URL(e,r);if(self[t].moduleMap[i])return s(self[t].moduleMap[i]);const o=new Blob([`import * as m from '${i}';`,`${t}.moduleMap['${i}']=m;`],{type:"text/javascript"}),l=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(o),onerror(){n(new Error(`Failed to import: ${e}`)),a(l)},onload(){s(self[t].moduleMap[i]),a(l)}});document.head.appendChild(l)})),self[t].moduleMap={}}}("/assets/");const V=(new Date).toISOString().substring(0,10),B=e=>(e=e?new Date(e):new Date).getTime()/1e3|0;class L{constructor(e){e=e||{},this.id=e._id,this.currency=e._currency,this.name=e._name,this.ticker=e._ticker,this.amount=e._amount,this.buyValue=e._buyValue,this.sellValue=e._sellValue,this.dateBuy=e._dateBuy,this.dateSell=e._dateSell,this.timeseries=e._timeseries,this.payouts=e._payouts,this.buyPrice=e._buyPrice,this.targetPrice=e._targetPrice,this.yearlyHigh=e._yearlyHigh,this.yearlyLow=e._yearlyLow,this.peRatio=e.peRatio,this.address=e.address,this.industry=e.industry,this.description=e.description,this.lastChecked=e.lastChecked,this.error=e.error,this.news=[],this.signal=e.signal}get id(){return this._id}set id(e){this._id=e||null}get currency(){return this._currency}set currency(e){this._currency=e||null}get highPrice(){let e=Math.max(...Object.values(this._timeseries));return e||0}get dateBuy(){return this._dateBuy?this._dateBuy.toISOString().substring(0,10):null}set dateBuy(e){if(e){let t=new Date(e);this._dateBuy=new Date(t.getTime()-6e4*t.getTimezoneOffset())}else this._dateBuy=null}set yearlyHigh(e){this._yearlyHigh=e?parseFloat(e):null}get yearlyHigh(){return this._yearlyHigh?this._yearlyHigh:null}set yearlyLow(e){this._yearlyLow=e?parseFloat(e):null}get yearlyLow(){return this._yearlyLow?this._yearlyLow:null}set targetPrice(e){this._targetPrice=e?parseFloat(e):null}get targetPrice(){return this._targetPrice?this._targetPrice:null}get lastPrice(){return this.prices.length>0?this.prices[this.prices.length-1]:null}set lastPrice(e){this.lastChecked&&e&&!this.isSold()&&(this._timeseries[this.lastChecked]=parseFloat(e))}get lastChangePct(){return!this.isSold()&&this.dates.length>1?this.lastPrice/this._timeseries[this.dates[this.dates.length-2]]-1:null}get holdingPeriod(){return this._dateBuy?parseInt(((this.isSold()?this._dateSell:new Date)-this._dateBuy)/864e5,10):null}get roi(){return this.holdingPeriod>365?100*(Math.pow(1+this.return/this.buyValue,1/(this.holdingPeriod/365))-1):this.return/this.buyValue*100}get dateSell(){return this._dateSell?this._dateSell.toISOString().substring(0,10):""}set dateSell(e){if(e){let t=new Date(e);this._dateBuy=new Date(t.getTime()-6e4*t.getTimezoneOffset())}else this._dateSell=null}get name(){return this._name}set name(e){this._name=e?e.toString():""}get ticker(){return this._ticker}set ticker(e){this._ticker=e?e.toString().toUpperCase():""}get timeseries(){return this._timeseries}set timeseries(e){if(this._timeseries={},e){let t=Object.keys(e);t.sort();for(let s of t)this._timeseries[s]=parseFloat(e[s]);this.lastChecked&&this.lastPrice&&!this.isSold()&&(this._timeseries[this.lastChecked]=this.lastPrice)}}get prices(){return Object.values(this._timeseries)}get dates(){return Object.keys(this._timeseries)}get buyValue(){return this._buyValue}set buyValue(e){this._buyValue=e?parseFloat(e):""}get sellValue(){return this._sellValue}set sellValue(e){this._sellValue=e?parseFloat(e):""}get amount(){return this._amount}set amount(e){this._amount=e?parseFloat(e):""}set buyPrice(e){this._buyPrice=e?parseFloat(e):null,this._timeseries[this.dateBuy]=this.buyPrice}get buyPrice(){return this._buyPrice}get payouts(){return this._payouts?Object.entries(this._payouts):{}}set payouts(e){if(this._payouts={},Array.isArray(e))for(let t of e)this._payouts[t.year]={value:t.value};else e&&(this._payouts=e)}getYear(){return this.isSold()?this._dateSell.getFullYear():this._dateBuy.getFullYear()}isUpdated(){const e=!this.ticker,t=!this.lastPrice&&!this.isSold(),s=0===this.dates.length&&this.isSold(),r=this.lastChecked===V;return!(e||t||s||!r)}isSold(){return!!this._dateSell}hasAlarm(){return this.stopLoss>this.lastPrice}}const O=t({assetList:[],currencies:["EUR"],exchangeRates:{EUR:{}},settings:{stopLoss:{pct:0,date:null},taxes:0,currency:"EUR",benchmark:{},termsConfirmed:!1}}),F=t(new L),D=s((()=>O.assetList.map((e=>new L(e))))),I=e=>{if(e.id){const t=D.value.map((e=>e.id)).indexOf(e.id);-1===t?O.assetList.push(new L(e)):O.assetList[t]=new L(e),A()}},q=e=>{Object.assign(F,new L(e))},A=()=>{localStorage.store=JSON.stringify(O)},N={provider:"finnhub",baseUrl:"https://finnhub.io/api/v1/"},j={provider:"iex",baseUrl:"https://cloud.iexapis.com/stable/"},H={provider:"exchangeratesapi",baseUrl:"https://api.exchangeratesapi.io/"},E=e=>{if(!e||!e.ticker)throw Error("User error: No ticker provided.")},T={history:{2:{provider:"iex",getUri:function({asset:e}){E(e);return{uri:j.baseUrl+"stock/"+e.ticker+"/chart/date/"+e.dateBuy.replace(/-/g,""),params:{chartByDay:!0}}},handleResponse:function(e,{asset:t}){if(!e[0])throw Error("No data");t.buyPrice=t.buyPrice?t.buyPrice:parseFloat(e[0].close).toFixed(2),this.lastChecked=V,I(t)}},1:{provider:N.provider,getUri:function({asset:e}){E(e);const t=N.baseUrl+"stock/candle",s=e.isSold()?e.dateSell:new Date;return{uri:t,params:{symbol:e.ticker,resolution:"D",from:B(e.dateBuy),to:B(s)}}},handleResponse:function(e,{asset:t}){let s={};if(!e.t)throw Error("No data");for(let r=0;r<e.t.length-1;r++){s[new Date(1e3*e.t[r]).toISOString().substring(0,10)]=parseFloat(e.c[r]).toFixed(2)}t.timeseries=s,t.buyPrice=t.buyPrice?t.buyPrice:parseFloat(e.c[0]).toFixed(2),t.lastChecked=V,t.currency="USD",I(t)}}},quote:{1:{provider:N.provider,getUri:function({asset:e}){E(e);return{uri:N.baseUrl+"quote",params:{symbol:e.ticker,adjusted:!0}}},handleResponse:function(e,{asset:t}){if(!e.c)throw Error("No data");t.lastChecked=V,t.lastPrice=e.c,t.currency="USD",I(t)}},2:{provider:j.provider,getUri:function({asset:e}){E(e);return{uri:j.baseUrl+"stock/"+e.ticker+"/quote",params:{}}},handleResponse:function(e,{asset:t}){t.lastChecked=V,t.lastPrice=e.latestPrice,I(t)}}},company:{1:{provider:j.provider,getUri:function({asset:e}){E(e);return{uri:j.baseUrl+"stock/"+e.ticker+"/company",params:{}}},handleResponse:function(e,{asset:t}){t.name=e.companyName,t.address=[e.address,e.zip,e.city,e.state,e.country].join(", "),t.industry=e.industry,t.description=e.description,I(t)}},2:{provider:N.provider,getUri:function({asset:e}){E(e);return{uri:N.baseUrl+"stock/profile2",params:{symbol:e.ticker}}},handleResponse:function(e,{asset:t}){t.name=e.name,t.currency=e.currency,t.industry=e.finnhubIndustry,I(t)}}},signal:{1:{provider:N.provider,getUri:function({asset:e}){E(e);return{uri:N.baseUrl+"scan/technical-indicator",params:{symbol:e.ticker,resolution:"M"}}},handleResponse:function(e,{asset:t}){e.technicalAnalysis&&(t.signal=e.technicalAnalysis.signal.toUpperCase()),e.trend&&(t.trending=e.trend.trending),I(t)}}},target:{1:{provider:N.provider,getUri:function({asset:e}){E(e);return{uri:N.baseUrl+"stock/price-target",params:{symbol:e.ticker}}},handleResponse:function(e,{asset:t}){t.targetPrice=e.targetMean,I(t)}}},news:{1:{provider:N.provider,getUri:function({asset:e,from:t,to:s}){E(e);return{uri:N.baseUrl+"company-news",params:{symbol:e.ticker,from:t,to:s}}},handleResponse:function(e,{asset:t}){t.news=e,I(t)}}},forexByDate:{1:{provider:"exchangeratesapi",getUri:function({currency:e,date:t}){return{uri:H.baseUrl+t,params:{base:O.settings.currrency,symbols:e}}},handleResponse:function(e,{currency:t,date:s}){O.exchangeRates[O.settings.currency][t][s]=e.rates[t],A()}}},currencies:{1:{provider:"exchangeratesapi",getUri:function(){return{uri:H.baseUrl+"latest",params:{base:O.settings.currency}}},handleResponse:function(e){O.currencies=[...Object.keys(e.rates),O.settings.currency],A()}}}},M=r("");async function Y(e,t){let s=null;try{let{uri:r,params:a}=e.getUri(t);const n=await fetch("https://pollofolio.netlify.app/.netlify/functions/"+e.provider,{method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify({uri:r,params:a})});s=await n.text(),console.log("API return string: ",s);const i=JSON.parse(s);e.handleResponse(i,t)}catch(r){throw r instanceof SyntaxError?Error(s):Error(r.message)}}async function z(e,t){let s=Object.keys(T[e]).length,r=1;for(M.value="";r<=s;)try{await Y(T[e][r],t),r=s+1}catch(a){M.value=a.message+" "+M.value,console.log("API error for request type "+e+": "+M.value),r++}}const J={error:M,requestHandler:z,updateFXRates:()=>{const e=O.settings.currency;for(const t of D.value)if(t.currency&&t.currency!==e){let s=!1;O.exchangeRates[e].hasOwnProperty(t.currency)?s=O.exchangeRates[e][t.currency].hasOwnProperty(t.dateBuy):O.exchangeRates[e][t.currency]={},s||J.requestHandler("forexByDate",{currency:t.currency,date:t.dateBuy}),J.requestHandler("forexByDate",{currency:t.currency,date:V})}},updateAssets:()=>{for(const e of D.value)e.isUpdated()||(z("history",{asset:e}),e.isSold()||(z("quote",{asset:e}),z("signal",{asset:e}),z("target",{asset:e})))},updateCurrencies:()=>{J.requestHandler("currencies")}};const $={setup(){const e=r("");let t=null;i((()=>{t=document.getElementById("dialog")})),o((()=>e.value),((e,t)=>{e.value||(J.error.value="")}));return{asset:F,ticker:e,confirm:confirm,cancel:()=>{e.value="",q(),t.close()},getCompanyInfo:async()=>{J.error.value="",e.value&&(F.ticker=e.value,await J.requestHandler("company",{asset:F}),F.name&&t.showModal())},error:J.error}}},X=m("data-v-2036b6dd");a("data-v-2036b6dd");const G=c("legend",null,"Add new asset",-1),Q={key:0,style:{color:"red"}},K=c("div",null,[c("small",null,[f(" Each stock has a unique identifier, called ticker. You can search tickers "),c("a",{target:"_blank",href:"https://finance.yahoo.com"},"here"),f(". ")])],-1),W={id:"dialog"},Z={method:"dialog"},ee=c("p",null,"Do you want to add this asset to your portfolio?",-1);n();const te=X(((e,t,s,r,a,n)=>(l(),u(g,null,[c("fieldset",null,[G,d(c("input",{id:"ticker",checked:"","onUpdate:modelValue":t[1]||(t[1]=e=>r.ticker=e),type:"text",maxLength:"10",placeholder:"Asset ticker/symbol"},null,512),[[h,r.ticker]]),c("button",{onClick:t[2]||(t[2]=e=>r.getCompanyInfo())},"ðŸ”"),c("small",null,[r.ticker&&r.error?(l(),u("p",Q,p(r.error),1)):y("",!0)]),K]),c("dialog",W,[c("form",Z,[c("h3",null,"Found "+p(r.asset.name),1),c("h5",null,p(r.asset.industry),1),ee,c("button",{type:"button",value:"cancel",onClick:t[3]||(t[3]=e=>r.cancel())},"Cancel"),c("button",{type:"button",value:"yes",onClick:t[4]||(t[4]=t=>e.$router.push("/details"))}," Yes ")])])],64))));$.render=te,$.__scopeId="data-v-2036b6dd";const se={setup(){const t=b();return i((()=>{1===O.currencies.length&&J.updateCurrencies()})),o((()=>O.settings.currency),((e,t)=>{console.log("change in currency detected");const s=e;O.exchangeRates.hasOwnProperty(s)||(console.log("Set up new currency base"),O.exchangeRates={},O.exchangeRates[s]={}),A(),J.updateFXRates()})),e(e({benchmarksList:[{text:"S&P500",value:"SPY"},{text:"NASDAQ",value:"QQQ"},{text:"DOW JONES",value:"DIA"}],router:t},v(O)),{assets:D})},watch:{"store.settings.stopLoss.pct":function(){A()},"store.settings.currency":function(){A()},"store.settings.taxes":function(){},"store.settings.benchmark._ticker":function(){A()}},methods:{exportData:function(){let e=D.map((function(e){return e._timeseries={},JSON.stringify(e)})).join("\r\n");var t=document.createElement("a");t.href="data:text/plain,"+encodeURIComponent(e),t.target="_blank",t.download="Portfolio"+V+".txt",document.body.appendChild(t),t.click()},uploader:function(){this.$refs.uploader.click()},importData:function(e){var t=e.target.files[0];if(t){var s=new FileReader;s.onload=async function(e){var t=e.target.result.split(/\r\n|\n/);t.length>=1?(O.assetList=[],t.forEach((function(e){try{const t=JSON.parse(e),s=new L(t);s.name&&I(s)}catch(t){alert("The data is not in the correct format")}})),J.updateAssets()):alert("The file is empty, my friend.")},s.readAsText(t)}else alert("No file found.");this.close()}}},re=m("data-v-72142a7c");a("data-v-72142a7c");const ae=c("summary",null,"âš™ï¸ Settings",-1),ne=c("legend",null,"Backup & Restore",-1),ie=c("legend",null,"Customize",-1),oe=c("label",{for:"currency"},"Display currency",-1),le=c("label",{for:"benchmark"},"Benchmark",-1),ue=c("label",{for:"stoploss"},"Stop Loss warning (in %)",-1);n();const ce=re(((e,t,s,r,a,n)=>(l(),u("details",null,[ae,c("div",null,[c("fieldset",null,[ne,c("button",{id:"export",onClick:t[1]||(t[1]=e=>n.exportData()),disabled:0===r.assets.length}," Backup portfolio ",8,["disabled"]),c("button",{id:"import",onClick:t[2]||(t[2]=e=>n.uploader())},"Restore portfolio"),c("input",{type:"file",onChange:t[3]||(t[3]=e=>n.importData(e)),ref:"uploader",style:{display:"none"}},null,544)]),c("fieldset",null,[ie,oe,c("select",{id:"currency",value:e.settings.currency,interface:"popover",onIonChange:t[4]||(t[4]=t=>e.settings.currency=t.target.value)},[(l(!0),u(g,null,_(e.currencies,(e=>(l(),u("option",{value:e,key:e},p(e),9,["value"])))),128))],40,["value"]),le,d(c("select",{id:"benchmark",interface:"popover","onUpdate:modelValue":t[5]||(t[5]=t=>e.settings.benchmark._ticker=t)},[(l(!0),u(g,null,_(r.benchmarksList,(e=>(l(),u("option",{value:e.value,key:e.value},p(e.text),9,["value"])))),128))],512),[[k,e.settings.benchmark._ticker]]),ue,d(c("input",{id:"stoploss",type:"number",min:"0",max:"99","onUpdate:modelValue":t[6]||(t[6]=t=>e.settings.stopLoss.pct=t),placeholder:"e.g. warn when 20% down"},null,512),[[h,e.settings.stopLoss.pct]])])])]))));se.render=ce,se.__scopeId="data-v-72142a7c";const de=e=>e.reduce(((e,t)=>e+t),0);function he(e){const t=e.map((e=>e.isSold()?null:e.lastPrice?e.lastPrice/e.buyPrice*e.buyValue-e.buyValue:null));return de(t)+pe(e)}function pe(e){const t=e.map((e=>{if(!O.exchangeRates.hasOwnProperty(O.settings.currency))return null;if(O.exchangeRates[O.settings.currency].hasOwnProperty(e.currency)){let t=O.exchangeRates[O.settings.currency][e.currency][V],s=O.exchangeRates[O.settings.currency][e.currency][e.dateBuy]/t;return e.lastPrice/e.buyPrice*e.buyValue*s-e.lastPrice/e.buyPrice*e.buyValue}return null}));return de(t)}function ye(e){const t=e.map((e=>e.isSold()?null:e.buyValue));return de(t)}function ge(e){return ye(e)+he(e)}const me={change:he,value:ge,income:function(e){const t=e.map((e=>{let t=0;for(let s in e._payouts)t+=parseFloat(e._payouts[s].value);return t}));return de(t)},diffToTargetPrice:function(e){const t=e.map((e=>!e.isSold()&&e.targetPrice&&e.lastPrice?e.targetPrice/e.lastPrice*ge([e])-ge([e]):null));return de(t)},missedGain:function(e){const t=e.map((e=>e.lastPrice&&e.highPrice&&e.highPrice>e.lastPrice?e.highPrice/e.lastPrice*ge([e])-ge([e]):null));return de(t)},invested:ye,returns:function(e){const t=e.map((e=>{let t=e.income?e.income:0;return e.isSold()?e._return=e.sellValue-e.buyValue+t:e._return=t,e._return}));return de(t)},FXChange:pe,relativeChange:function(e,t){return e.map((e=>{const s=e.dates.length>0&&t.hasOwnProperty("_timeseries");if(!e.isSold()&&s){let s=t._timeseries[e.dateBuy],r=Object.values(t._timeseries),a=r[r.length-1];if(e.dateSell&&(a=t._timeseries[e.dateSell]),s&&a)return e.changePct-(a-s)/s*100}return null}))},lastChange:function(e){const t=e.map((e=>e.dates.length>1?e.lastChangePct*e.buyValue:null));return de(t)}};const fe={setup:()=>({kpis:t({"Day's change":{subtitle:"How much you are up or down today.",info:null,value:me.lastChange(D.value),unit:O.settings.currency},"Total change":{icon:"ðŸ“ˆ",subtitle:"Your assets' change in value.",info:"https://www.investopedia.com/terms/c/change.asp",value:me.change(D.value),unit:O.settings.currency},"Forex effects":{icon:"ðŸ˜¢",subtitle:"Effect of currency exchange rate changes.",info:null,value:me.FXChange(D.value),unit:O.settings.currency},"Current balance":{icon:"ðŸ¦",subtitle:"Your assets' current value.",info:"https://www.investopedia.com/terms/m/marketvalue.asp",value:me.value(D.value),unit:O.settings.currency},Invested:{icon:"ðŸ§¾",subtitle:"Purchase value of your assets.",info:"https://www.investopedia.com/terms/i/investment.asp",value:me.invested(D.value),unit:O.settings.currency},Returns:{icon:"ðŸ’°",subtitle:"Gain/Loss from sold assets & dividends.",info:"https://www.investopedia.com/terms/r/return.asp",value:me.returns(D.value),unit:O.settings.currency},Income:{icon:"ðŸ—“ï¸",subtitle:"Income from receiving dividends.",info:"https://www.investopedia.com/terms/d/dividend.asp",value:me.income(D.value),unit:O.settings.currency},"Missed Gain":{icon:"ðŸ˜¢",subtitle:"Drop in value from highest point.",info:null,value:me.missedGain(D.value),unit:O.settings.currency},"Delta to target":{icon:"ðŸ˜¢",subtitle:"Predicted change based on avg. price target.",info:null,value:me.diffToTargetPrice(D.value),unit:O.settings.currency}}),toLocaleNumber:R})},be=m("data-v-ae7041ca");a("data-v-ae7041ca");const ve=c("summary",null,"ðŸ† Portfolio Stats",-1),_e={style:{"font-size":"12pt"}},ke={style:{"font-size":"8pt"}};n();const we=be(((e,t,s,r,a,n)=>(l(),u("details",null,[ve,c("div",null,[(l(!0),u(g,null,_(r.kpis,((e,t)=>(l(),u("div",{key:t},[c("span",_e,p(t)+": "+p(r.toLocaleNumber(e.value,0)),1),c("span",ke,"Â "+p(e.unit),1)])))),128))])]))));fe.render=we,fe.__scopeId="data-v-ae7041ca";const Pe={components:{SearchAsset:$,Settings:se,KPIs:fe},setup(){localStorage.store&&(Object.assign(O,JSON.parse(localStorage.store)),O.settings.benchmark=new L(O.settings.benchmark)),i((()=>{J.updateAssets(),J.updateFXRates()}))}},Se={class:"noselect"};Pe.render=function(e,t,s,r,a,n){const i=w("Settings"),o=w("router-view");return l(),u("div",Se,[c("header",null,[c("h1",{class:"handFont",onClick:t[1]||(t[1]=t=>e.$router.push("/"))},"Uglyfolio"),c(i)]),c(o)])};const xe={props:["prices","dates","height"],components:{apexchart:P},data:function(){return{series:[{name:"Price",data:this.prices}],chartOptions:{chart:{offsetX:0,toolbar:{show:!1},type:"area",height:this.height,width:"100%",sparkline:{enabled:!0}},legend:{show:!1},grid:{show:!1,padding:{left:0,right:0,bottom:0,top:0}},stroke:{curve:"smooth",colors:[this.getColor()],width:2},dataLabels:{enabled:!1},fill:{opacity:0},yaxis:{labels:{show:!1}},xaxis:{labels:{show:!1},axisBorder:{show:!1},axisTicks:{show:!1},crosshairs:{show:!1},categories:this.dates},tooltip:{enabled:!0,theme:"dark",marker:{show:!1}},colors:[this.getColor()]}}},methods:{getColor(){return this.prices[0]<=this.prices[this.prices.length-1]?"#1B998B":"#FF4560"}}},Ce=m("data-v-5987a843");a("data-v-5987a843");const Ue={id:"chart"};n();const Re=Ce(((e,t,s,r,a,n)=>{const i=w("apexchart");return l(),u("div",Ue,[c(i,{type:"area",height:s.height,options:e.chartOptions,series:e.series},null,8,["height","options","series"])])}));xe.render=Re,xe.__scopeId="data-v-5987a843";const Ve={components:{SearchAsset:$,Chart:xe},setup(){const t=b(),r=s((()=>O.assetList.length>0));return e({hasAssets:r,toLocaleNumber:R,showDetails:e=>{q(e),t.push("/details")},settings:O.settings,asset:F,assets:D},me)}},Be=m("data-v-ffddfd6a");a("data-v-ffddfd6a");const Le={style:{"font-size":"10pt"}};n();const Oe=Be(((e,t,s,r,a,n)=>{const i=w("Chart");return l(!0),u(g,null,_(r.assets,((t,s)=>(l(),u("fieldset",{key:s,onClick:e=>r.showDetails(t)},[c("legend",null,p(t.name),1),c("h3",{class:e.change([t])>=0?"posColor":"negColor"},[f(" Change "+p(r.toLocaleNumber(e.change([t]),0))+" ",1),c("span",Le,p(r.settings.currency),1)],2),c(i,{prices:t.prices,dates:t.dates,height:"60"},null,8,["prices","dates"])],8,["onClick"])))),128)}));Ve.render=Oe,Ve.__scopeId="data-v-ffddfd6a";const Fe={components:{KPIs:fe,Portfolio:Ve,SearchAsset:$},setup(){q()}},De=m("data-v-64f30004");a("data-v-64f30004");const Ie=c("br",null,null,-1),qe=c("br",null,null,-1);n();const Ae=De(((e,t,s,r,a,n)=>{const i=w("KPIs"),o=w("SearchAsset"),d=w("Portfolio");return l(),u("main",null,[c(i),Ie,c(o),qe,c(d)])}));Fe.render=Ae,Fe.__scopeId="data-v-64f30004";const Ne={setup(e){const t=b(),s=r([]);J.requestHandler("quote",{asset:F}),J.requestHandler("signal",{asset:F}),J.requestHandler("target",{asset:F});return o((()=>F.dateBuy),((e,t)=>{console.log("change in buy date detected"),J.requestHandler("history",{asset:F})})),{save:()=>{s.value=[],F.dateBuy||s.value.push("Buy date required."),F.buyValue||s.value.push("Invested amount required."),F.amount||s.value.push("Number of shares required."),F.dateSell&&F.dateSell<F.dateBuy&&s.value.push("Sell date is before Purchase date."),0===s.value.length&&(F.id||(F.id=Math.random().toString(36).substr(2,16)),I(F),t.push("/"))},today:V,asset:F,settings:O.settings,errors:s,toLocaleNumber:R}}},je=m("data-v-e43b0238");a("data-v-e43b0238");const He=c("legend",null,"Transaction details",-1),Ee=c("label",{for:"dateBuy"},"Purchase date",-1),Te={for:"buyValue"},Me=c("label",{for:"amount"},"Number of shares",-1),Ye={for:"buyPrice"},ze=c("label",{for:"dateSell"},"Sell date",-1),Je={for:"sellValue"},$e=c("div",null,[c("button",{type:"submit"},"Save")],-1);n();const Xe=je(((e,t,s,r,a,n)=>(l(),u("form",{onSubmit:t[7]||(t[7]=S((e=>r.save()),["prevent"]))},[c("fieldset",null,[He,(l(!0),u(g,null,_(r.errors,((e,t)=>(l(),u("div",{key:t},p(e),1)))),128)),Ee,d(c("input",{id:"dateBuy",type:"date",required:"","onUpdate:modelValue":t[1]||(t[1]=e=>r.asset.dateBuy=e),max:r.today},null,8,["max"]),[[h,r.asset.dateBuy]]),c("label",Te,"Invested amount (in "+p(r.settings.currency)+")",1),d(c("input",{id:"buyValue","onUpdate:modelValue":t[2]||(t[2]=e=>r.asset.buyValue=e),type:"number",step:"0.01",min:"0",required:""},null,512),[[h,r.asset.buyValue,void 0,{number:!0}]]),Me,d(c("input",{id:"amount",required:"","onUpdate:modelValue":t[3]||(t[3]=e=>r.asset.amount=e),type:"number",step:"0.01",min:"0"},null,512),[[h,r.asset.amount,void 0,{number:!0}]]),c("label",Ye,"Price per share @ purchase date (in "+p(r.asset.currency)+")",1),d(c("input",{id:"buyPrice","onUpdate:modelValue":t[4]||(t[4]=e=>r.asset.buyPrice=e),type:"number",step:"0.01",min:"0",required:""},null,512),[[h,r.asset.buyPrice,void 0,{number:!0}]]),ze,d(c("input",{id:"dateSell",type:"date","onUpdate:modelValue":t[5]||(t[5]=e=>r.asset.dateSell=e),max:r.today},null,8,["max"]),[[h,r.asset.dateSell]]),c("label",Je,"Sell value (in "+p(r.settings.currency)+")",1),d(c("input",{id:"sellValue","onUpdate:modelValue":t[6]||(t[6]=e=>r.asset.sellValue=e),type:"number",step:"0.01",min:"0"},null,512),[[h,r.asset.sellValue,void 0,{number:!0}]]),$e])],32))));Ne.render=Xe,Ne.__scopeId="data-v-e43b0238";const Ge={setup:()=>({asset:F})},Qe=m("data-v-5bf046e2");a("data-v-5bf046e2");const Ke=c("legend",null,"Asset information",-1),We=c("label",null,"Industry:",-1),Ze={key:0},et=c("label",null,"Address:",-1),tt={key:1},st={key:2};n();const rt=Qe(((e,t,s,r,a,n)=>(l(),u("fieldset",null,[Ke,We,r.asset.industry?(l(),u("i",Ze,p(r.asset.industry),1)):y("",!0),et,r.asset.description?(l(),u("div",tt,p(r.asset.description),1)):y("",!0),r.asset.address?(l(),u("address",st,p(r.asset.address),1)):y("",!0)]))));Ge.render=rt,Ge.__scopeId="data-v-5bf046e2";const at={components:{Info:Ge,Form:Ne,Portfolio:Ve},setup(){const e=b(),t=()=>{e.push("/")};return{asset:F,goHome:t,remove:e=>{confirm("Are you sure you want delete it?")&&((e=>{O.assetList=O.assetList.filter((t=>t.id!==e.id)),A()})(e),t())}}}},nt=m("data-v-b84e46e0")(((e,t,s,r,a,n)=>{const i=w("Form"),o=w("Info");return l(),u("main",null,[c("h2",null,p(r.asset.name),1),r.asset.id?(l(),u("button",{key:0,onClick:t[1]||(t[1]=e=>r.remove(r.asset))},"Delete")):y("",!0),r.asset.id?(l(),u("button",{key:1,onClick:t[2]||(t[2]=e=>r.goHome())},"Cancel")):y("",!0),c(i),c(o)])}));at.render=nt,at.__scopeId="data-v-b84e46e0";const it=[{path:"/",name:"home",component:Fe},{path:"/details",name:"details",component:at}],ot=x({history:C(),routes:it,scrollBehavior:()=>({x:0,y:0})});U(Pe).use(ot).use(P).mount("#app");
